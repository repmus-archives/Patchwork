(in-package :pw)#|;;; provisoire(defun record--ae (&rest rest)(declare (ignore rest)))(defun mkSO (&rest rest)(declare (ignore rest)))(defun cl-user::asAEDesc (&rest rest)(declare (ignore rest)))(defun cl-user::getDescRecPtr (&rest rest)(declare (ignore rest)))(defun pw::win-title (&rest rest)(declare (ignore rest)))(defvar *position-new-box* nil)(defun init-patch-pos (win patch)  (when *position-new-box*    (let* ((x (point-h *position-new-box*))           (y (point-v *position-new-box*))           (x1 (point-h (view-size win)))           (y1 (point-v (view-size win))))      (if (and (>= x 0) (>= y 0) (< x x1) (< y y1))        (set-view-position patch *position-new-box*)))));;; provisoire|#;protection#|(defun startup-protection (name)  (let ((canrun? t))    (unless (and (ccl:shift-key-p) (ccl:command-key-p) (ccl:control-key-p))      (let (protec)        (with-pstrs ((appnname name)                     (username "pour l'instant cca ne m'interese"))          (setf protec (CheckProtectionOnStartup 0 appnname username 0)))        (cond         ((= 0 protec) (setf canrun? t))         ((= 1 protec) (setf canrun? t) (setf *pw-nosave-mode* t))         (t (setf canrun? nil)))))    canrun?))(unless (startup-protection (current-app-name))  (ccl::confirmed-quit))|#(defvar *presentation* nil)(defclass dialog-present (dialog) ())(defmethod view-click-event-handler ((self dialog-present) where)  (declare (ignore where))  (window-hide self))(setf *presentation* (MAKE-INSTANCE 'dialog-present :window-title "About PatchWork" :color-p t :window-type  :double-edge-box                                     :view-position (make-point 200  200) :VIEW-SIZE #@(340 280)))(add-subviews *presentation*               (MAKE-DIALOG-ITEM                'static-TEXT-DIALOG-ITEM #@(10 10) #@(330 270)                "PatchWork 2.6.4 PPC.© 1990-1997 IRCAM and Mikael Laurson.Developed by Laurson, Duthen, Rueda, Assayag, Agon.Special thanks to Baisnee, Barrire, Battier, Boynton, Dalbavie, Fineberg, Gerszo, Lindberg, Malherbe, Malt, Murail, Pottier, Puig, Roads, Saariaho and many others for their diverse contributions.Midi drivers and sequencer provided by MidiShare (TM) and PlayerSharedPPC (TM). Copyright ©1989-1997 Grame. All rights reserved." 'Nil))(window-select *presentation*)(setf ccl::*load-verbose* nil);(load "CL:Images;cl-path" :if-does-not-exist nil) (INIT:build-logical-hosts)(set-menubar *default-CCL-menubar*)(make-pop-up-menu-instance)(make-MN-popUpMenus)(setf *object-connection-draw-mode* *gray-pattern*) (setf *normal-connection-draw-mode* *black-pattern*) (setf *cross-hair-cursor* (make-cross-hair-cursor))(get-box-cursor)(let ((ccl:*warn-if-redefine* nil))  (load "CL:PW-modifs" :if-does-not-exist nil))(load-remembered-config);(setf ccl::*warn-if-redefine-kernel* nil);(setf (symbol-function 'ccl::startup-finished) (symbol-function 'ccl::*oldstartup-finished*));(setf ccl::*warn-if-redefine-kernel* t);(ccl::startup-finished);(print "Checking protection");(load-protection)(window-hide *presentation*)(when (find-menu-item *apple-menu* "About Macintosh Common LispÉ")(set-menu-item-title (find-menu-item *apple-menu* "About Macintosh Common LispÉ") "About PatchWork...")(set-menu-item-action-function (find-menu-item *apple-menu* "About PatchWork...") #'(lambda () (window-select *presentation*))))(setf ccl::*load-verbose* t);(setf pw::*pw-nosave-mode* nil)