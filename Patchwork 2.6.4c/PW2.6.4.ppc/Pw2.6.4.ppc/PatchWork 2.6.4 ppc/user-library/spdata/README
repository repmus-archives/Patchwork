readme librarie spdata xavier chabot IRCAM19/03/94-------------------- ajoute module print-spdataun nouveau module pour affichage sur le listener des donnees spdata- correction module filter pour les filtrages "eq" et "neq"ils prennent des listes en entree val(ex selectionner tous les partiels presents dans une liste)par contre, band pass et band reject ont encore le bug: on ne peutdonner plusieurs bandes a la fois20/03/94-------------- module filter: bug si eq ou neq et val est une liste de 1 elementil faut que val = number ou val = (n n)- write-qlist spdata: correction bug, les methodes compute resfact et normalize-amp manquaient !!12/04/94-----------------module write-msgboxgros changement: il n'y a plus de message global;les données sortent de la msgbox par un outletchangement dans spdata-class.lisp methods: mk-fmt-msgboxwrite-msgbox-headerwrite-msgbox-tail22/04/94------------structure du directory spdata apres discussion avec M. Maltdans spdata:- spdata-src:sources          - kernel        - interpols-spdata-patches :divers patches      - on-line-help  - help on line appelé par la commande <select box, t>      - tutorial   tutorial progressifs et systématiques      - exemples   exemple ou utilitaires      - MaxProgs   resulat au format abstraction max      - data       ascii spectral data en format iana ou model de resonance lisp- spdata-doc   documentation au format Microsoft word ou framemaker   22/04/94------------- module par-spdata si l'entree est spdata-seq  , retourne ((dates) (values))  au lieu de ((date (values ) (date (values) ..)- si un modele spdata est de taille nulle (size spdata) == 0beep et print warning:iana-readllmod-readmk-spdatafilterprint erreur message:filteriana-writellmod-writeprint-spdata- addsyn-readcreates and adds spdata only if size > 024/04/94------------ correction for mk-spdata-seq: take delayts and converts in absolute time internally- correction in write-qlist-data: frame value was used for an eventual delay. now is always 0 (no delay at onset); if a delay is needed, use spdata-seq11/08/94------------ correction LP: get-partial-data, enleve 1+13/08/94------------ modif lp pour compatibilité avec Chant: modification des noms de certains fichierset donc de load-spdatadetected bugg n°426b : la lecture avec addsyn-read créé un spdata en trop à t = 0detected bugg n°426c : impossibilité de brancher addsyn-read sur addsyn-write: conflit de types   Mismatch of type !     (output (spdata object) input (spdata-seq))- nouvelle abstraction : sp-frame20/08/94------------modifs LP1) j'ai supprimé l'ajout d'un spdata nul en debut de spdata seqdans spdata-seq-class à partir de : ;; add a spdata equal to the first one but with 0 amplitudes  les 4 lignes suivantes2) légèrement changé mk-spdata-seq(defunp mk-spdata-seq ((frames list (:value '()))                     (spdata spdata)) spdata-seq"creates a spdata-seq object with a list of spdata objects and a list of frames"  (when spdata    (unless (listp spdata) (setf spdata (list spdata)))    (when (< (length frames) (length spdata)) ;;when frames list is too short      ;(setf frames (append frames (make-list (- (length spdata) (length frames))      ;                                   :initial-element (car (last frames)))))      (warn "frames list is too short")  ; lp 20/8/94            )  ;  ;; converts in seconds, cumulate for absolute time and store in frame slot  ;  (let (atimes (cumtime 0))  ;    (setf atimes (cons 0 (mapcar #'(lambda( time ) (setf cumtime (+ (/ time 100.) cumtime))) frames)))    ;; write frame slot in spdata      (mapcar #'(lambda (spd time) (setf (frame spd) time)) spdata frames)   ; lp 20/8/94    (make-instance 'C-spdata-seq :duration (car (last frames))                   :spdata spdata :type (type (first spdata))                   :file (file (first spdata)))    ))3) read-addsyn par defaut toutes les bw à 1modifs in spdata-seq-class :(setf (bws curaddsyn-frame) (make-list (length (amps curaddsyn-frame)) :initial-element 1))  ; lp 20/8/94 ;*******************************************************25/08/94----------;modifs in add-to-spdata.lispcreation d'un module pour lire les analyse terhardt de svputiliser une commande du style :"svp.mips -Amask weight 18 n20 -Ssmpg-fin2.sf -M8192  -I4096  -Oa:n,t,f,a,w > Thdt_smpgfin_w18n20M4I8"de façon à formatter les donnees convenablementle "load" est donc modifié;*******************************************************26/08/94----------;modifs in all "read" and "write" modules : le dernier directory selectionné est mémoriséavant ça avait l'air prévu mais non fonctionnantcréation variable (defvar *lastspfile* "root");;; <=============== CHABOT ====================5.09.94---------file : pw-spdata-seq.lisp- remis correctement mecanisme last-loadedfile dans fucntions addsyn-read , addsyn-writemais noter que last-loaded-file est une globale pour toutes les fontionsread/write spdata (slot de class dans classe "spd")- rajoute ligne (assert spdata () "spdata input is nil~D") dans fonction addsyn-write- file  : spd-class.lispfonction:  write-spdata-qlist et write-spdata-msgboxremplace (compute-resfact) par (when resfact-flag (compute-resfact self))function compute-resfact: protection erreur numerique si somme des amps nulleemplace par 16.9.94--------file spdata-class.lispchange beaucoup de fonctions pour avoir write-msgbox partager partiels en 2 msg boxes quand size > 507.9.94-------file modres:rpia-la3.llcorriger mauvais caractere dans la liste des amlplitudesfile spd-class.Lispfonction write-ttag-data et write-qlist-tailreplace nop with nop 0 because otherwise, qlist does not output the first line et rajoute' outlet pour nqlist-del;;; <=============== LP ====================8.9.94-------file add-to-spdataread-mask pour lire terhardt version svpread-add-syn2 pour forcer même nbre de partiels;;; ================ xc =====================23.9.94spd-class.Lispajoute arg msg a write-qlist-tail pour ecrire le message <msg>-offen fin de qlist --> donner la fin de la note;;;<=============== LP + xc====================25/12/94rules pour spdataaddtospdata integré dans code26/12/94enlevé readaddsyn2à fairefinir readbinenlever format read mask;;; <=============== LP ====================6.1.95-------dans .lib, supprimé(eval-enqueue '(progn                  (pw::find&load-lib "spdata-src" "load-spdata" "spdata-src")))et remplacé par(eval-enqueue (pw::find&load-lib "spdata-src" "load-spdata" "spdata-src"))